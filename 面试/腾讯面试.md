# 腾讯

1、mmap 时内存和磁盘交互过程

2、线程通信方式

3、分布式数据库的sql拆分原则

4、static变量在编译和运行时的位置

编译后在虚拟内存的数据段，运行时被加载到了内存里。

5、提交一条语句，数据库的处理流程

mmap函数主要执行过程：

 ***\*（）进程启动映射过程，并在虚拟地址空间中为映射创建虚拟映射区域\**** 

**（二）调用内核空间的系统调用函数mmap（不同于用户空间函数），实现文件物理地址和进程虚拟地址的一一映射关系**

***\*（三）进程发起对这片映射空间的访问，引发缺页异常，实现文件内容到物理内存（主存）的拷贝\****



#### 查询语句处理流程

1、客户端提交sql

2、连接管理，权限验证

3、查询缓存命中与否，命中则直接返回结果，不然进行词法、语义分析

4、执行计划生成、索引选择

5、执行语句，返回结果



#### 更新语句执行基本流程

1、判断数据页是否在内存中，是的话，返回数据行；否则从磁盘读入内存然后返回数据行

2、将改行值+1，写入新行

3、新行更新到内存，写redo log，处于prepare阶段

4、提交事务commit